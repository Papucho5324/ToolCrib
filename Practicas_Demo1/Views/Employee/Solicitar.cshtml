@{
	ViewData["Title"] = "Solicitar Material";
	ViewData["MostrarHeader"] = true;
	ViewData["MostartMenu"] = false;
}

<link rel="stylesheet" href="~/css/solicitar.css" asp-append-version="true" />

<div class="container py-4">
	<div class="row">
		<div class="col-lg-8 m-auto">
			<div class="tool-container">
				<div class="tool-form">
					<div class="container-fluid h-100">
						<div class="row h-100 align-items-center">
							<div class="col-12 col-md-3 text-md-start text-center mb-2 mb-md-0">
								<h6 class="mb-0">Folio: <span id="folio">Se generará al finalizar</span></h6>
							</div>
							<div class="col-12 col-md-7 d-flex flex-column flex-md-row align-items-center justify-content-center mb-2 mb-md-0">
								<p class="mb-1 mb-md-0 me-md-3">¿Qué deseas solicitar?</p>
								<div class="btn-group" role="group">
									<input type="radio" class="btn-check" name="tipo" id="option1" autocomplete="off" checked>
									<label class="btn btn-outline-primary btn-sm" for="option1">Material</label>

									<input type="radio" class="btn-check" name="tipo" id="option2" autocomplete="off">
									<label class="btn btn-outline-primary btn-sm" for="option2">Herramienta</label>
								</div>
							</div>
							<div class="col-12 col-md-2 text-center text-md-end">
								<form asp-controller="Employee" asp-action="Logout" method="post">
									<button type="submit" class="btn btn-danger btn-sm px-4">Salir</button>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row mt-4">
		<div class="col-lg-8 m-auto">
			<div class="login-container">
				<div class="solicitar-form">
					<h1 class="welcome-title">Solicitar Material</h1>
					<p class="welcome-subtitle">Por favor llena todos los campos</p>

					<form id="formSolicitud">
						<input type="hidden" id="folioHidden" value="" />
						<input type="hidden" id="codigo" value="" />

						<label for="producto" class="mt-3 mb-0">Buscar producto:</label>
						<select id="producto" class="form-control" name="producto">
							<option disabled selected>Cargando materiales...</option>
						</select>

						<div class="row mt-3">
							<div class="col-md-6">
								<label>U.M.</label>
								<input type="text" id="unidadMedida" class="form-control" readonly />
							</div>
							<div class="col-md-6">
								<label>Stock Disponible</label>
								<input type="text" id="stockDisponible" class="form-control" readonly />
							</div>
						</div>

						<input type="hidden" id="stock" class="form-control" readonly />

						<label class="mt-3">Cantidad</label>
						<input type="number" id="cantidad" class="form-control" placeholder="Cantidad a solicitar" min="1" />

						<label class="mt-3">Comentarios</label>
						<select class="form-control" id="comentario">
							<option selected>Nuevo Ingreso</option>
							<option>Fin de vida util</option>
							<option>Extravio</option>
							<option>Salida de material</option>
							<option>Visitas</option>
							<option>Gerencia</option>
							<option>Otros</option>
						</select>

						<div class="d-flex mt-4 justify-content-between">
							<button type="button" id="btnAgregarProducto" class="btn btn-success px-4">
								<i class="fas fa-plus"></i> Agregar a solicitud
							</button>
							<button type="reset" class="btn btn-info px-4">
								<i class="fas fa-eraser"></i> Limpiar
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	<div class="row mt-4">
		<div class="col-lg-8 m-auto">
			<div class="login-container">
				<div class="solicitar-form">
					<div class="d-flex justify-content-between align-items-center mb-3">
						<h2 class="welcome-title mb-0">Productos en Solicitud</h2>
						<span class="badge bg-primary" id="contadorProductos">0 productos</span>
					</div>

					<div class="table-responsive-container">
						<table class="table table-striped table-hover mb-0">
							<thead class="table-dark">
								<tr>
									<th>Código</th>
									<th>Descripción</th>
									<th>Cantidad</th>
									<th>U.M.</th>
									<th>Comentario</th>
									<th>Acciones</th>
								</tr>
							</thead>
							<tbody id="productosAgregados">
								<tr id="filaVacia" class="text-center">
									<td colspan="6" class="py-4 text-muted">
										<i class="fas fa-inbox fa-2x mb-2"></i>
										<p class="mb-0">No hay productos agregados</p>
									</td>
								</tr>
							</tbody>
						</table>
					</div>

					<div class="d-flex justify-content-between align-items-center mt-3">
						<button type="button" id="btnLimpiarLista" class="btn btn-warning px-4" disabled>
							<i class="fas fa-trash"></i> Limpiar Lista
						</button>
						<button type="button" id="btnFinalizarSolicitud" class="btn btn-primary px-4" disabled>
							<i class="fas fa-paper-plane"></i> Finalizar y Enviar Solicitud
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Modal de Confirmación -->
<div class="modal fade" id="modalConfirmacion" tabindex="-1" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Confirmar Envío</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
			</div>
			<div class="modal-body">
				<p>¿Estás seguro de que deseas enviar la solicitud con <span id="totalProductosModal"></span> producto(s)?</p>
				<p class="text-muted small">Esta acción no se puede deshacer.</p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
				<button type="button" class="btn btn-primary" id="btnConfirmarEnvio">
					<i class="fas fa-check"></i> Confirmar Envío
				</button>
			</div>
		</div>
	</div>
</div>

@section Scripts {
	<script src="~/js/solicitar.js"></script>
}